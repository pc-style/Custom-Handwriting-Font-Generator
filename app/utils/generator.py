import random
import math

SKELETONS = {
    "A": [[(50, 10), (10, 90)], [(50, 10), (90, 90)], [(30, 50), (70, 50)]],
    "B": [
        [(20, 10), (20, 90)],
        [(20, 10), (70, 25), (20, 50)],
        [(20, 50), (80, 70), (20, 90)],
    ],
    "C": [[(80, 20), (30, 10), (10, 50), (30, 90), (80, 80)]],
    "D": [[(20, 10), (20, 90)], [(20, 10), (80, 50), (20, 90)]],
    "E": [[(80, 10), (20, 10), (20, 90), (80, 90)], [(20, 50), (70, 50)]],
    "F": [[(80, 10), (20, 10), (20, 90)], [(20, 50), (70, 50)]],
    "G": [[(80, 20), (30, 10), (10, 50), (30, 90), (80, 80), (80, 50), (50, 50)]],
    "H": [[(20, 10), (20, 90)], [(80, 10), (80, 90)], [(20, 50), (80, 50)]],
    "I": [[(50, 10), (50, 90)], [(30, 10), (70, 10)], [(30, 90), (70, 90)]],
    "J": [[(70, 10), (70, 80), (50, 90), (30, 80)]],
    "K": [[(20, 10), (20, 90)], [(80, 10), (20, 50), (80, 90)]],
    "L": [[(20, 10), (20, 90), (80, 90)]],
    "M": [[(10, 90), (10, 10), (50, 50), (90, 10), (90, 90)]],
    "N": [[(20, 90), (20, 10), (80, 90), (80, 10)]],
    "O": [[(50, 10), (10, 50), (50, 90), (90, 50), (50, 10)]],
    "P": [[(20, 10), (20, 90)], [(20, 10), (80, 30), (20, 50)]],
    "Q": [[(50, 10), (10, 50), (50, 90), (90, 50), (50, 10)], [(60, 60), (90, 90)]],
    "R": [[(20, 10), (20, 90)], [(20, 10), (80, 30), (20, 50), (80, 90)]],
    "S": [[(80, 20), (20, 20), (80, 80), (20, 80)]],
    "T": [[(50, 10), (50, 90)], [(10, 10), (90, 10)]],
    "U": [[(20, 10), (20, 80), (50, 90), (80, 80), (80, 10)]],
    "V": [[(10, 10), (50, 90), (90, 10)]],
    "W": [[(10, 10), (30, 90), (50, 50), (70, 90), (90, 10)]],
    "X": [[(10, 10), (90, 90)], [(90, 10), (10, 90)]],
    "Y": [[(10, 10), (50, 50)], [(90, 10), (50, 50)], [(50, 50), (50, 90)]],
    "Z": [[(10, 10), (90, 10), (10, 90), (90, 90)]],
    "a": [[(80, 40), (40, 40), (20, 60), (40, 80), (80, 80), (80, 40), (80, 90)]],
    "b": [[(20, 10), (20, 90)], [(20, 50), (70, 50), (70, 90), (20, 90)]],
    "c": [[(80, 50), (40, 40), (20, 60), (40, 90), (80, 80)]],
    "d": [[(80, 10), (80, 90)], [(80, 50), (30, 50), (30, 90), (80, 90)]],
    "e": [[(20, 60), (80, 60), (80, 40), (20, 40), (20, 90), (80, 90)]],
    "f": [[(50, 90), (50, 10), (80, 10)], [(30, 40), (70, 40)]],
    "g": [[(80, 40), (30, 40), (30, 90), (80, 90), (80, 40), (80, 120), (40, 120)]],
    "h": [[(20, 10), (20, 90)], [(20, 50), (70, 50), (70, 90)]],
    "i": [[(50, 40), (50, 90)], [(50, 20), (50, 22)]],
    "j": [[(50, 40), (50, 120), (20, 120)], [(50, 20), (50, 22)]],
    "k": [[(20, 10), (20, 90)], [(60, 40), (20, 70), (70, 90)]],
    "l": [[(50, 10), (50, 90)]],
    "m": [
        [(20, 40), (20, 90)],
        [(20, 50), (50, 50), (50, 90)],
        [(50, 50), (80, 50), (80, 90)],
    ],
    "n": [[(20, 40), (20, 90)], [(20, 50), (70, 50), (70, 90)]],
    "o": [[(50, 40), (20, 65), (50, 90), (80, 65), (50, 40)]],
    "p": [[(20, 40), (20, 120)], [(20, 50), (70, 50), (70, 90), (20, 90)]],
    "q": [[(80, 40), (80, 120)], [(80, 50), (30, 50), (30, 90), (80, 90)]],
    "r": [[(20, 40), (20, 90)], [(20, 60), (60, 40)]],
    "s": [[(70, 45), (30, 45), (70, 85), (30, 85)]],
    "t": [[(40, 20), (40, 90), (60, 90)], [(20, 40), (60, 40)]],
    "u": [[(20, 40), (20, 90), (70, 90), (70, 40)]],
    "v": [[(20, 40), (50, 90), (80, 40)]],
    "w": [[(10, 40), (30, 90), (50, 50), (70, 90), (90, 40)]],
    "x": [[(20, 40), (80, 90)], [(80, 40), (20, 90)]],
    "y": [[(20, 40), (50, 90)], [(80, 40), (20, 120)]],
    "z": [[(20, 40), (80, 40), (20, 90), (80, 90)]],
    "0": [[(50, 10), (20, 50), (50, 90), (80, 50), (50, 10)]],
    "1": [[(40, 20), (50, 10), (50, 90)]],
    "2": [[(20, 20), (80, 20), (80, 50), (20, 90), (80, 90)]],
    "3": [[(20, 20), (80, 20), (50, 50), (80, 80), (20, 80)]],
    "4": [[(70, 90), (70, 10), (20, 60), (80, 60)]],
    "5": [[(80, 10), (20, 10), (20, 50), (80, 50), (80, 90), (20, 90)]],
    "6": [[(80, 10), (20, 50), (20, 90), (80, 90), (80, 50), (20, 50)]],
    "7": [[(20, 10), (80, 10), (40, 90)]],
    "8": [
        [
            (50, 50),
            (80, 20),
            (50, 10),
            (20, 20),
            (50, 50),
            (80, 80),
            (50, 90),
            (20, 80),
            (50, 50),
        ]
    ],
    "9": [[(80, 50), (20, 50), (20, 10), (80, 10), (80, 50), (50, 90)]],
    "+": [[(10, 50), (90, 50)], [(50, 10), (50, 90)]],
    "-": [[(10, 50), (90, 50)]],
    "=": [[(10, 40), (90, 40)], [(10, 60), (90, 60)]],
    "<": [[(80, 10), (20, 50), (80, 90)]],
    ">": [[(20, 10), (80, 50), (20, 90)]],
    "/": [[(80, 10), (20, 90)]],
    "*": [[(20, 20), (80, 80)], [(80, 20), (20, 80)], [(50, 10), (50, 90)]],
    "∑": [[(80, 10), (20, 10), (50, 50), (20, 90), (80, 90)]],
    "∫": [[(70, 10), (50, 10), (50, 90), (30, 90)]],
    "α": [[(70, 20), (30, 50), (30, 80), (70, 80), (70, 50), (30, 20)]],
    "β": [[(30, 90), (30, 10), (70, 20), (50, 50), (70, 80), (30, 90)]],
    "π": [[(20, 20), (80, 20)], [(35, 20), (35, 90)], [(65, 20), (65, 90)]],
}


def generate_char_path(char: str, style: dict) -> str:
    """
    Generate an SVG path for a character based on style parameters.
    style dict should contain: 'slant' (degrees), 'thickness' (stroke width).
    """
    if char not in SKELETONS:
        return ""
    strokes = SKELETONS[char]
    slant_rad = math.radians(style.get("slant", 0))
    path_commands = []
    for stroke in strokes:
        if not stroke:
            continue
        pts = []
        for i, (x, y) in enumerate(stroke):
            offset_y = y - 50
            shear_x = offset_y * math.tan(slant_rad)
            new_x = x + shear_x
            noise_x = random.uniform(-2, 2)
            noise_y = random.uniform(-2, 2)
            pts.append((new_x + noise_x, y + noise_y))
        cmd = f"M {pts[0][0]:.1f} {pts[0][1]:.1f}"
        if len(pts) == 2:
            cmd += f" L {pts[1][0]:.1f} {pts[1][1]:.1f}"
        else:
            for j in range(1, len(pts)):
                cmd += f" L {pts[j][0]:.1f} {pts[j][1]:.1f}"
        path_commands.append(cmd)
    return " ".join(path_commands)